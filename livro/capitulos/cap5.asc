[[cap5]]
== Introdução à Análise Combinatória

*A Análise Combinatória* (ou, simplesmente, _Combinatória_) é o ramo da Matemática que analisa estruturas e relações discretas, nelas procurando determinar métodos de contagem ou de enumeração (termos aqui usados no sentido de determinar o número de elementos de um conjunto e de atribuir números naturais a seus elementos).

*Nosso objetivo, nesta unidade*, é, primeiramente, você (relembrar e voltar a) dominar as técnicas de contagem e enumeração mais conhecidas (que são as de combinações, arranjos e permutações) de subconjuntos de um conjunto _finito_ e que satisfazem certas condições dadas. (Como você, com suficiente carga horária e profundidade, já estudou isso no ensino médio e para o recente vestibular, então, quanto à teoria, faremos apenas uma sucinta revisão em ritmo acelerado, quase sem nenhuma prova de fórmulas e teoremas; mas faremos muitos exemplos de resoluções de problemas, que são tudo o que pediremos nos exames.) 

A seguir, procuraremos lhe dar um panorama informativo sobre alguns dos outros mais importantes métodos de contagem (estes são difíceis para este seu primeiro período na universidade, não exigiremos completo domínio deles nos exames).
A importância da Combinatória na Ciência da Computação decorre do fato de que um considerável número de problemas muito frequentemente encontrados são redutíveis a apenas alguns poucos problemas básicos de contagem, que se apresentam sob variados ``disfarces''. 

.Sempre vamos repetir
[TIP]
====
Estamos torcendo por você. O fórum de alunos, os tutores, e eu (o professor) queremos e vamos ajudá-lo (nessa ordem), mas você tem que ser determinado e disciplinado, *cada semana dedicando 4 a 8 horas para estudar este livro*.
====

.Conteúdo deste capítulo
____________________
* Técnicas Básicas de Contagem. Permutações, Arranjos, Combinações
* Relações de Recorrência
* Coeficientes Binomiais
* Outras Sequências de Contagem
* Teorema de Ramsey
____________________

[NOTE]
====
Devido à sua concisão e objetividade, pegamos o ``jeitão'', o esqueleto mestre e ordem de apresentação, a escolha de tópicos do capítulo 6 do livro ``_Programming Challenges_'', de Steven S. Skiena e Miguel A. Revilla, muito útil, que pode ser encontrado na Internet para download gratuito (mas que, repetimos, é muito conciso e denso).

Se você quiser ver o assunto mais explicada e profundamente do que aqui, não precisará de mais que os livros textos da ementa da disciplina. Se quiser ir ainda mais profundo que eles, recomendo um livro específico, http://pt.scribd.com/doc/99378433/Analise-Combinatoria-e-Probabilidade-Augusto-Cesar-de-Oliveira-Morgado-Pedro-Fernandez-1991, particularmente seu capítulo 2, que tem 24 ótimos exemplos, todos eles resolvidos, sobre combinações e permutações. *Este livro contém a teoria e as provas de todas as fórmulas aqui usadas*, e elas também foram vistas no ensino médio, por isso omitiremos muitas delas e recomendamos que os eventuais interessados as vejam ali, ou nos livros texto desta disciplina. A notação dos assuntos que cobriremos e que você pode procurar nessas fontes incluem: latexmath:[$P(n), Pc(n), Pr(n,r), P(n,(n_a,n_b,\ldots)), K(n), A(n,r), A(n,n_1,r,r_1), C(n,r), Cr(n,r),$] etc. 

Agradecemos aos Profs. Paulo Roberto Rezende e Rômulo Garcia, do Projeto Rumo ao ITA, uma parte do Sistema Elite de Ensino, por muitos dos exemplos e problemas propostos, que entendemos que são questões de passados vestibulares ao ITA e ao IME. Você pode encontrar muitas e boas videoaulas sobre o assunto, mas gostei mais de
http://www.youtube.com/watch?v=VInwxDcFWaQ (Prof. Gui, 22 min de exercícios sobre Algarismos, Permutações e Anagramas) e http://www.youtube.com/watch?v=VK_ThpOO6TE (Prof. Gui, 22 min de exercícios sobre Arranjos e Combinações). Preparei 2 videoaulas: http://www.youtube.com/watch?v=eCG18ODYuEY (problema composto: Registro de Empregados); http://www.youtube.com/watch?v=Yms9aqPTQsU (problema composto: Trem).
====

//_

=== Técnicas Básicas de Contagem. Permutações, Arranjos, Combinações

*Regra do produto* (ou *Princípio Fundamental da Enumeração*): Se há latexmath:[$\vert A \vert$] possibilidades no conjunto latexmath:[$A$] e há latexmath:[$\vert B \vert$] possibilidades no conjunto latexmath:[$B$], então há latexmath:[$\vert A \vert \times \vert B \vert$] maneiras de combinar uma possibilidade de latexmath:[$A$] e uma de latexmath:[$B$].

Generalizando, se há latexmath:[$n$] conjuntos latexmath:[$A_i$], cada um com latexmath:[$m_i$] elementos (distintos, claro), e temos que escolher 1 elemento de cada um dos latexmath:[$n$] conjuntos, cada escolha sendo independente de todas as outras, então o número total de possibilidades é latexmath:[$m_1 \times m_2 \times \cdots \times m_n$].

Por exemplo, suponha que o conjunto latexmath:[$A_1$] é constituído por 5 camisas e o conjunto latexmath:[$A_2$] por 4 calças. Então, há latexmath:[$5 \times 4 = 20$] maneiras diferentes de você escolher 1 camisa e 1 calça.

Rosen reexpressa assim: Suponha-se que um procedimento consista em se fazer as tarefas latexmath:[$T_1, T_2, \ldots , T_m$] (nesta ordem). Se a tarefa latexmath:[$T_i$] pode ser feita de latexmath:[$n_i$] maneiras após as tarefas latexmath:[$T_1, T_2, \ldots \mbox{ e } T_{i-1}$] terem sido feitas, então existem latexmath:[$n_1 \times n_2 \times \cdots n_m$] formas de realizar o procedimento.

.(Morgado-Carvalho-Carvalho-Fernandez):
====
Quantos números naturais de três algarismos distintos (na base 10) existem (assumimos que não começam por 0)?

{zwsp} +
*Solução:* O primeiro algarismo pode ser escolhido de 9 modos (não podemos usar o 0), o segundo de 9 modos (não podemos usar o algarismo utilizado anteriormente) e o terceiro de 8 modos (não podemos usar os dois algarismos já empregados anteriormente). A resposta é latexmath:[$9 \times 9 \times 8 = 648$]. (Sempre devemos começar tratando o conjunto que tenha a escolha de seu elemento independente das escolhas dos elementos dos outros conjuntos, se for o primeiro conjunto onde se faz a escolha, mas que tenha a escolha mais difícil se ela for deixada para depois. Isto, neste problema, é a escolha do primeiro algarismo: se começássemos da direita para a esquerda, ao chegarmos ao primeiro algarismos teríamos 8 escolhas se o 0 já tivesse sido escolhido, e 7 em caso contrário.)
====

NOTE: Mais de 10 exemplos que se seguem também servem de exemplos de aplicação da regra do produto.

*Regra da Soma:* Se há latexmath:[$\vert A \vert$] possibilidades no conjunto latexmath:[$A$] e há latexmath:[$\vert B \vert$] possibilidades no conjunto latexmath:[$B$], então há latexmath:[$\vert A \vert + \vert B \vert$] formas para latexmath:[$A$] ou latexmath:[$B$] ocorrerem, assumindo-se que os elementos de latexmath:[$A$] são diferentes dos de latexmath:[$B$]. Generalizando, dados os conjuntos latexmath:[$A_1, A_2, \ldots, A_n$], em que latexmath:[$A_i$] tem exatamente latexmath:[$a_i$] elementos, então o número de elementos da união latexmath:[$A_1 \cup A_2 \cup \cdots \cup A_n$] é dado por latexmath:[$a_1 + a_2 + a_3 + \cdots + a_n$].

Por exemplo, dado que você possui 5 camisas e 4 calças, e a lavanderia telefona avisando que arruinou uma peça de suas roupas, sem dizer mais nada, então há 9 itens possíveis com a possibilidade de terem sido arruinados.

.{zwsp}
====
Uma senha de usuário de um sistema computacional pode ser formada por sequências (portanto a ordem, as posições importam) de 5 a 13 caracteres, cada um deles (inclusive o primeiro) podendo ser letra maiúscula, letras minúscula, um dos 10 dígitos, sublinhado, ponto, hífen, e jogo da velha, totalizando latexmath:[$26+26+10+4 = 66$] caracteres diferentes, sendo que repetições são permitidas. Quantas senhas diferentes existem?

{zwsp} +
*Solução:*
O conjunto de todas as senhas é formado pelo subconjunto das senhas de 5 caracteres, união o subconjunto das senhas de 6 caracteres, união ... , união o subconjunto das senhas de 13 caracteres. (Como veremos ao estudar permutações com repetições) o primeiro subconjunto tem latexmath:[$66^5$] possibilidades, o segundo latexmath:[$66^6$], etc. A resposta é a soma: latexmath:[$\sum_{i=5}^{13}66^i \cong 4,57827 \times 10^{23}$].
====

(Mais de 5 exemplos que se seguem também servem de exemplos de aplicação da regra da soma)

*Fórmula da Inclusão-Exclusão:* A regra de soma é um caso especial de uma fórmula mais geral, chamada de Fórmula de Inclusão-Exclusão. Para dois conjuntos que podem se sobrepor, ela é:

[width="100%",cols=">.^,<.^",frame="none",grid="none"]
|====
|image:images/cap5/img01-union.eps[width="100"] |latexmath:[$\vert A \cup B \vert = \vert A \vert + \vert B \vert - \vert A \cap B \vert$]
|====

A fórmula de inclusão-exclusão pode ser generalizada para três conjuntos e além, de uma forma natural.

.Para quatro conjuntos:
[NOTE]
====

latexmath:[$\vert A \cup B \cup C \cup D \vert  =  \vert A \vert + \vert B \vert + \vert C \vert + \vert D \vert - \vert A \cap B \vert - \vert A \cap C \vert  - \vert A \cap D \vert - \vert B \cap C \vert - \vert B \cap D \vert - \vert C \cap D \vert + \vert A \cap B \cap C \vert + \vert A \cap B \cap D \vert  +  \vert A \cap C \cap D \vert + \vert B \cap C \cap D \vert - \vert A \cap B \cap C \cap D \vert  $]
====

.Matrix
[latexmath]
++++++++++++++++++++++++++++++++++++++++++++
\[ P^{e \rightarrow c}= \left[
  \begin{array}{*{3}{r@{}l}}
  & \cos \theta & & \sin \theta \sin \varphi & & \sin \theta \cos \varphi\\

  & \sin \theta \sin \psi
  & & \cos \varphi \cos \psi - \cos \theta \sin \varphi \sin \psi
  & - & \sin \varphi \cos \psi - \cos \theta \cos \varphi \sin \psi\\

  - & \sin \theta \cos \psi
  & & \cos \varphi \sin \psi + \cos \theta \sin \varphi \cos \psi
  & - & \sin \varphi \sin \psi + \cos \theta \cos \varphi \cos \psi\\
  \end{array}
\right] \]
++++++++++++++++++++++++++++++++++++++++++++