[[cap5]]
== Introdução à Análise Combinatória

*A Análise Combinatória* (ou, simplesmente, _Combinatória_) é o ramo da Matemática que analisa estruturas e relações discretas, nelas procurando determinar métodos de contagem ou de enumeração (termos aqui usados no sentido de determinar o número de elementos de um conjunto e de atribuir números naturais a seus elementos).

*Nosso objetivo, nesta unidade*, é, primeiramente, você (relembrar e voltar a) dominar as técnicas de contagem e enumeração mais conhecidas (que são as de combinações, arranjos e permutações) de subconjuntos de um conjunto _finito_ e que satisfazem certas condições dadas. (Como você, com suficiente carga horária e profundidade, já estudou isso no ensino médio e para o recente vestibular, então, quanto à teoria, faremos apenas uma sucinta revisão em ritmo acelerado, quase sem nenhuma prova de fórmulas e teoremas; mas faremos muitos exemplos de resoluções de problemas, que são tudo o que pediremos nos exames.) 

A seguir, procuraremos lhe dar um panorama informativo sobre alguns dos outros mais importantes métodos de contagem (estes são difíceis para este seu primeiro período na universidade, não exigiremos completo domínio deles nos exames).
A importância da Combinatória na Ciência da Computação decorre do fato de que um considerável número de problemas muito frequentemente encontrados são redutíveis a apenas alguns poucos problemas básicos de contagem, que se apresentam sob variados ``disfarces''. 

.Sempre vamos repetir
[TIP]
====
Estamos torcendo por você. O fórum de alunos, os tutores, e eu (o professor) queremos e vamos ajudá-lo (nessa ordem), mas você tem que ser determinado e disciplinado, *cada semana dedicando 4 a 8 horas para estudar este livro*.
====

.Conteúdo deste capítulo
____________________
* Técnicas Básicas de Contagem. Permutações, Arranjos, Combinações
* Relações de Recorrência
* Coeficientes Binomiais
* Outras Sequências de Contagem
* Teorema de Ramsey
____________________

[NOTE]
====
Devido à sua concisão e objetividade, pegamos o ``jeitão'', o esqueleto mestre e ordem de apresentação, a escolha de tópicos do capítulo 6 do livro ``_Programming Challenges_'', de Steven S. Skiena e Miguel A. Revilla, muito útil, que pode ser encontrado na Internet para download gratuito (mas que, repetimos, é muito conciso e denso).

Se você quiser ver o assunto mais explicada e profundamente do que aqui, não precisará de mais que os livros textos da ementa da disciplina. Se quiser ir ainda mais profundo que eles, recomendo um livro específico, http://pt.scribd.com/doc/99378433/Analise-Combinatoria-e-Probabilidade-Augusto-Cesar-de-Oliveira-Morgado-Pedro-Fernandez-1991, particularmente seu capítulo 2, que tem 24 ótimos exemplos, todos eles resolvidos, sobre combinações e permutações. *Este livro contém a teoria e as provas de todas as fórmulas aqui usadas*, e elas também foram vistas no ensino médio, por isso omitiremos muitas delas e recomendamos que os eventuais interessados as vejam ali, ou nos livros texto desta disciplina. A notação dos assuntos que cobriremos e que você pode procurar nessas fontes incluem: latexmath:[$P(n), Pc(n), Pr(n,r), P(n,(n_a,n_b,\ldots)), K(n), A(n,r), A(n,n_1,r,r_1), C(n,r), Cr(n,r),$] etc. 

Agradecemos aos Profs. Paulo Roberto Rezende e Rômulo Garcia, do Projeto Rumo ao ITA, uma parte do Sistema Elite de Ensino, por muitos dos exemplos e problemas propostos, que entendemos que são questões de passados vestibulares ao ITA e ao IME. Você pode encontrar muitas e boas videoaulas sobre o assunto, mas gostei mais de
http://www.youtube.com/watch?v=VInwxDcFWaQ (Prof. Gui, 22 min de exercícios sobre Algarismos, Permutações e Anagramas) e http://www.youtube.com/watch?v=VK_ThpOO6TE (Prof. Gui, 22 min de exercícios sobre Arranjos e Combinações). Preparei 2 videoaulas: http://www.youtube.com/watch?v=eCG18ODYuEY (problema composto: Registro de Empregados); http://www.youtube.com/watch?v=Yms9aqPTQsU (problema composto: Trem).
====

//_

=== Técnicas Básicas de Contagem. Permutações, Arranjos, Combinações

*Regra do produto* (ou *Princípio Fundamental da Enumeração*): Se há latexmath:[$\vert A \vert$] possibilidades no conjunto latexmath:[$A$] e há latexmath:[$\vert B \vert$] possibilidades no conjunto latexmath:[$B$], então há latexmath:[$\vert A \vert \times \vert B \vert$] maneiras de combinar uma possibilidade de latexmath:[$A$] e uma de latexmath:[$B$].

Generalizando, se há latexmath:[$n$] conjuntos latexmath:[$A_i$], cada um com latexmath:[$m_i$] elementos (distintos, claro), e temos que escolher 1 elemento de cada um dos latexmath:[$n$] conjuntos, cada escolha sendo independente de todas as outras, então o número total de possibilidades é latexmath:[$m_1 \times m_2 \times \cdots \times m_n$].

Por exemplo, suponha que o conjunto latexmath:[$A_1$] é constituído por 5 camisas e o conjunto latexmath:[$A_2$] por 4 calças. Então, há latexmath:[$5 \times 4 = 20$] maneiras diferentes de você escolher 1 camisa e 1 calça.

Rosen reexpressa assim: Suponha-se que um procedimento consista em se fazer as tarefas latexmath:[$T_1, T_2, \ldots , T_m$] (nesta ordem). Se a tarefa latexmath:[$T_i$] pode ser feita de latexmath:[$n_i$] maneiras após as tarefas latexmath:[$T_1, T_2, \ldots \mbox{ e } T_{i-1}$] terem sido feitas, então existem latexmath:[$n_1 \times n_2 \times \cdots n_m$] formas de realizar o procedimento.

.(Morgado-Carvalho-Carvalho-Fernandez):
====
Quantos números naturais de três algarismos distintos (na base 10) existem (assumimos que não começam por 0)?

{zwsp} +
*Solução:* O primeiro algarismo pode ser escolhido de 9 modos (não podemos usar o 0), o segundo de 9 modos (não podemos usar o algarismo utilizado anteriormente) e o terceiro de 8 modos (não podemos usar os dois algarismos já empregados anteriormente). A resposta é latexmath:[$9 \times 9 \times 8 = 648$]. (Sempre devemos começar tratando o conjunto que tenha a escolha de seu elemento independente das escolhas dos elementos dos outros conjuntos, se for o primeiro conjunto onde se faz a escolha, mas que tenha a escolha mais difícil se ela for deixada para depois. Isto, neste problema, é a escolha do primeiro algarismo: se começássemos da direita para a esquerda, ao chegarmos ao primeiro algarismos teríamos 8 escolhas se o 0 já tivesse sido escolhido, e 7 em caso contrário.)
====

NOTE: Mais de 10 exemplos que se seguem também servem de exemplos de aplicação da regra do produto.

*Regra da Soma:* Se há latexmath:[$\vert A \vert$] possibilidades no conjunto latexmath:[$A$] e há latexmath:[$\vert B \vert$] possibilidades no conjunto latexmath:[$B$], então há latexmath:[$\vert A \vert + \vert B \vert$] formas para latexmath:[$A$] ou latexmath:[$B$] ocorrerem, assumindo-se que os elementos de latexmath:[$A$] são diferentes dos de latexmath:[$B$]. Generalizando, dados os conjuntos latexmath:[$A_1, A_2, \ldots, A_n$], em que latexmath:[$A_i$] tem exatamente latexmath:[$a_i$] elementos, então o número de elementos da união latexmath:[$A_1 \cup A_2 \cup \cdots \cup A_n$] é dado por latexmath:[$a_1 + a_2 + a_3 + \cdots + a_n$].

Por exemplo, dado que você possui 5 camisas e 4 calças, e a lavanderia telefona avisando que arruinou uma peça de suas roupas, sem dizer mais nada, então há 9 itens possíveis com a possibilidade de terem sido arruinados.

.{zwsp}
====
Uma senha de usuário de um sistema computacional pode ser formada por sequências (portanto a ordem, as posições importam) de 5 a 13 caracteres, cada um deles (inclusive o primeiro) podendo ser letra maiúscula, letras minúscula, um dos 10 dígitos, sublinhado, ponto, hífen, e jogo da velha, totalizando latexmath:[$26+26+10+4 = 66$] caracteres diferentes, sendo que repetições são permitidas. Quantas senhas diferentes existem?

{zwsp} +
*Solução:*
O conjunto de todas as senhas é formado pelo subconjunto das senhas de 5 caracteres, união o subconjunto das senhas de 6 caracteres, união ... , união o subconjunto das senhas de 13 caracteres. (Como veremos ao estudar permutações com repetições) o primeiro subconjunto tem latexmath:[$66^5$] possibilidades, o segundo latexmath:[$66^6$], etc. A resposta é a soma: latexmath:[$\sum_{i=5}^{13}66^i \cong 4,57827 \times 10^{23}$].
====

(Mais de 5 exemplos que se seguem também servem de exemplos de aplicação da regra da soma)

*Fórmula da Inclusão-Exclusão:* A regra de soma é um caso especial de uma fórmula mais geral, chamada de Fórmula de Inclusão-Exclusão. Para dois conjuntos que podem se sobrepor, ela é:

[width="100%",cols=">.^,<.^",frame="none",grid="none"]
|====
|image:images/cap5/img01-union.eps[width="100"] |latexmath:[$\vert A \cup B \vert = \vert A \vert + \vert B \vert - \vert A \cap B \vert$]
|====

A fórmula de inclusão-exclusão pode ser generalizada para três conjuntos e além, de uma forma natural.

.Para quatro conjuntos:
[NOTE]
====
{zwsp} +
latexmath:[$\vert A \cup B \cup C \cup D \vert  =  \vert A \vert + \vert B \vert + \vert C \vert + \vert D \vert - \vert A \cap B \vert - \vert A \cap C \vert  - \vert A \cap D \vert - \vert B \cap C \vert - \vert B \cap D \vert - \vert C \cap D \vert + \vert A \cap B \cap C \vert + \vert A \cap B \cap D \vert  +  \vert A \cap C \cap D \vert + \vert B \cap C \cap D \vert - \vert A \cap B \cap C \cap D \vert  $]
====

*Generalizando:* o número de elementos da união de n conjuntos é obtido quando somamos o número de elementos de cada conjunto, subtraímos o número de elementos das interseções dos conjuntos tomados 2 a 2, somamos o número de elementos das interseções dos conjuntos tomados 3 a 3, subtraímos o número de elementos das interseções dos conjuntos tomados 4 a 4 e, assim, sucessivamente.

.(R. Garcia):
====
Quantos são os anagramas da palavra CADERNO (note que esta palavra tem 7 letras, todas distintas) que têm C em 1º lugar, ou A em 2º lugar, ou D em 3° lugar, ou E em 4º lugar?

{zwsp} +
*Solução:* 

Inicialmente, definamos os conjuntos:

* latexmath:[$A_1$]: conjunto cujos elementos são os anagramas da palavra CADERNO que têm a letra C em 1º lugar
* latexmath:[$A_2$]: conjunto cujos elementos são os anagramas da palavra CADERNO que têm a letra A em 2º lugar
* latexmath:[$A_3$]: conjunto cujos elementos são os anagramas da palavra CADERNO que têm a letra D em 3º lugar
* latexmath:[$A_4$]: conjunto cujos elementos são os anagramas da palavra CADERNO que têm a letra E em 4º lugar

Queremos determinar latexmath:[$\vert A_1 \cup A_2 \cup A_3 \cup A_4 \vert$]. Temos:

* Quanto aos 4 conjuntos isolados: latexmath:[$\vert A_1 \vert = \vert A_2 \vert = \vert A_3 \vert = \vert A_4 \vert = P(6) = 6! = 720$] (fixar 1 letra e permutar as 6 demais)
* Quanto aos 6 conjuntos de interseções de 2 conjuntos: latexmath:[$\vert A_1 \cap A_2 \vert = \vert A_1 \cap A_3 \vert = \vert A_1 \cap A_4 \vert = \vert A_2 \cap A_3 \vert = \vert A_2 \cap A_4 \vert = \vert A_3 \cap A_4 \vert = P(5) = 5! = 120$] (fixar 2 letras e permutar as 5 demais)
* Quanto aos 4 conjuntos de interseções de 3 conjuntos: latexmath:[$\vert A_1 \cap A_2 \cap A_3 \vert = \vert A_1 \cap A_2 \cap A_4 \vert = \vert A_1 \cap A_3 \cap A_4 \vert = \vert A_2 \cap A_3 \cap A_4 \vert = P(4) = 4! = 24$] (fixar 3 letras e permutar as 4 demais)
* Quanto aos 1 conjunto de interseção dos 42 conjuntos: latexmath:[$\vert A_1 \cap A_2 \cap A_3 \cap A_4 \vert = P(3) = 3! = 6$] (fixar 4 letras e permutar as 3 demais).

Pela fórmula da inclusão-exclusão, temos:

[latexmath]
++++
\[ \vert A_1 \cup A_2 \cup A_3 \cup A_4 \vert = 4 \times 720 - 6 \times 120 + 4 \times 24 - 1 \times 6 = 2250 \]
++++
 
Logo, temos 2250 anagramas da palavra CADERNO com as restrições impostas pelo enunciado.
====


(_Indevida_) *Dupla contagem* é um aspecto escorregadio da combinatória, o que pode tornar difícil a resolução de problemas através da fórmula de inclusão-exclusão. Outra técnica poderosa é estabelecer uma bijeção. 

* *Bijeção* é um mapeamento um-a-um entre (todos) os elementos de um conjunto e (todos) os elementos de outro. Sempre que você tem tal mapeamento, contar o tamanho de um dos conjuntos automaticamente lhe dá o tamanho do outro conjunto. +
Por exemplo, se contarmos o número de todos os pares de sapatos que, neste instante, estão sendo usados em um determinado pelotão de soldados (e podemos assumir que cada soldado usa exatamente 1 par de sapatos, e cada par de sapatos é usado exatamente por 1 soldado), então isso nos diz qual é o número de soldados no pelotão. Isto funciona porque há um mapeamento um-a-um entre pares de sapatos e soldados, e poderia falhar se estivéssemos falando de número de objetos no bolso alto da camisa (que pode ser 0, 1, 2, ou 3, em cada soldado).

Explorar bijeções nos obriga a ter um repertório de conjuntos que sabemos como contar, para que possamos mapear outros objetos para eles. Os objetos combinatoriais básicos com os quais você deve estar familiarizado incluem os seguintes (e é útil ter um sentimento de quão rapidamente o número de objetos cresce, para saber quando busca exaustiva torna-se uma técnica inviável):

Podemos formar latexmath:[$2^n$] subconjuntos (distintos, claro) através de selecionarmos (sem repetição) elementos de um conjunto de latexmath:[$n$] elementos (distintos, claro).

* *Subconjuntos:* Podemos formar latexmath:[$2^n$] subconjuntos (distintos, claro) através de selecionarmos (sem repetição) elementos de um conjunto de n elementos (distintos, claro). Por exemplo, existem latexmath:[$2^3 = 8$] subconjuntos de latexmath:[$\{1,2,3\}$], e tais subconjuntos são latexmath:[$\{1\}, \{2\}, \{3\}, \{1,2\}, \{1,3\}, \{2,3\}, \{1,2,3\}$], e o conjunto vazio (nunca esqueça o conjunto vazio). Para latexmath:[$n = 20$], latexmath:[$2^n = 1048576$], então começamos a chegar aos limites (da viabilidade) da busca exaustiva.

* *Permutação Simples* é uma sequência (portanto não somente importam o valor ou natureza dos elementos, mas, também, a ordem, as posições deles) sem repetições, de comprimento n, de elementos tirados de um conjunto de latexmath:[$n$] elementos distintos. O número dessas sequências distintas é +
[width="80%",cols="1<,3<",frame="none",grid="none"]
|====
|latexmath:[$P(n) = n!$], |_leia latexmath:[$P(n)$] como ``permutação simples de latexmath:[$n$] elementos distintos''_
|====

*Prova(1)*, consequência direta da aplicação da regra do produto: temos n modos de escolher o 1º elemento da sequência, latexmath:[$n-1$] modos de escolher o 2º elemento, etc., e a regra do produto nos diz que há latexmath:[$n(n-1)(n-2) \cdots 3 \cdot 2 \cdot 1$] modos de formar a sequência. Isto é, latexmath:[$P(n) = n!$].

*Prova(2)*, por indução: a fórmula vale para latexmath:[$n=1$], pois o número de permutações de 1 elemento é 1, que coincide com o valor dado pela fórmula. Assumamos, agora, que a fórmula vale para latexmath:[$n = m-1$], isto é, latexmath:[$P(m-1) = (m-1)!$] Se provarmos que a fórmula vale para latexmath:[$n=m$], o princípio da indução matemática assegurará que ela valerá para todo latexmath:[$n \geq 1$]. Ora, para cada uma das latexmath:[$P(m-1)$] sequências de latexmath:[$m-1$] elementos, o elemento latexmath:[$m$]-ésimo poderá ser inserido antes do primeiro elemento, ou depois do último, ou em qualquer das latexmath:[$m-2$] fronteiras entre dois elementos vizinhos, portanto em latexmath:[$1+1+(m-2) = m$] locais. Portanto, o número de sequências possíveis, latexmath:[$P(m)$], será latexmath:[$m$] vezes latexmath:[$P(m-1)$], isto é latexmath:[$P(m) = mP(m-1) = m(m-1)! = m!$], de modo que a fórmula vale. C.Q.D.

Note que, para latexmath:[$n = 10, n! = 3628800$], então começamos a chegar aos limites (da viabilidade) da busca exaustiva.

.(Morgado-Carvalho-Carvalho-Fernandez):
====
De quantos modos 5 rapazes e 5 moças podem se sentar em 5 bancos de 2 lugares cada, de modo que em cada banco fique 1 rapaz e 1 moça?

{zwsp} +
*Solução:*

O 1º rapaz pode escolher seu lugar de 10 modos (em 5 bancos de 2 lugares), o 2º rapaz de 8 modos (em 4 bancos), o 3º de 6 modos (...), o 4º de 4 modos (...), e o 5º de 2 modos (...). Colocados os rapazes, temos de colocar as moças nos 5 lugares que sobraram, o que pode ser feito de 5! modos. A resposta é latexmath:[$(10 \times 8 \times 6 \times 4 \times 2) \times 5! = 460800$].
====

A *formação das permutações* de latexmath:[$n \geq 1$] elementos pode ser feita assim (_bottom-up_, _forward_):
* a permutação de 1 elemento 1 é 1;
* para formar as latexmath:[$n!$] permutações de latexmath:[$\{1,2, \ldots, n\}$], tome cada uma das latexmath:[$(n-1)!$] permutações de latexmath:[$\{1,2, \ldots ,n-1\}$] e, em cada uma, insira latexmath:[$n$] antes dela e imprima, depois insira latexmath:[$n$] entre o 1º e 2º elemento dela e imprima, etc., insira latexmath:[$n$] depois da latexmath:[$(n-1)$]-ésima posição dela e imprima. +
Por exemplo: as permutações de 1 elemento são somente uma: 1;as permutações de 2 elementos são duas: 21, 12; as permutações de 3 elementos são seis : 321, 231, 213, 312, 132, 123; etc.
Os algoritmos mais simples têm um tempo de execução que, no pior caso, é assintoticamente proporcional a latexmath:[$n!$]). Os mais sofisticados, têm latexmath:[$O(\lg{(n!)})$] (http://journal.dyu.edu.tw/dyujo/document/setjournal/s05-4-21-29.pdf).

.Desafio
[NOTE]
====
Só para sua satisfação, quando tiver tempo sobrando: note como a regra de formação acima vista deriva da prova por indução da fórmula latexmath:[$P(n) = n!$], e vice-versa.
====

.Desafio
[NOTE]
====
Só para sua satisfação, quando souber programar bem: escreva e teste um programa que implemente a regra de formação acima. 
====

.Desafio
[NOTE]
====
Só para sua satisfação, quando souber programar bem: Examine em http://www.geeksforgeeks.org/lexicographic-permutations-of-string/ a regra de Dijkstra para gerar as permutações em ordem lexicográfica (muito interessante), e faça e teste um programa para isso, finalmente compare-o com o da mesma URL (a versão otimizada é latexmath:[$O(n \cdot n!)$]).
====

* *Permutação (Simples) Circular* é uma permutação simples de latexmath:[$n$] elementos distintos colocados formando um círculo (se duas permutações coincidem girando-se o circulo, não são distintas). O número dessas permutações distintas é +
[width="80%",cols="1<,3<",frame="none",grid="none"]
|====
|latexmath:[$Pc(n) = (n-1)!$] |_leia latexmath:[$Pc(n)$] como ``permutação simples e circular de latexmath:[$n$] elementos distintos''_
|====

A *prova* é simples: dos latexmath:[$n$] objetos, o 1º pode ocupar qualquer posição círculo, e, por causa da definição acima, isto não terá efeito sobre a fórmula; restam então, latexmath:[$(n-1)$] posições, que poderão ser ocupadas de latexmath:[$(n-1)(n-2)(n-3) \cdots 1 = (n-1)!$] diferentes maneiras.

.{zwsp}
====
Seja um grupo de 10 amigos. De quantos modos distintos estes amigos podem sentar-se ao redor de a uma mesa circular sem que haja repetição das posições relativas?

{zwsp} +
*Solução:* latexmath:[$Pc(10) = (10-1)! = 9! = 362880$]
====

* *Permutação Podendo Repetir Elementos* é uma sequência (portanto não somente importam o valor ou natureza dos elementos, mas, também, a ordem, as posições deles) de comprimento r que pode repetir elementos de um conjunto de n elementos distintos. O número dessas distintas permutações é: +
[width="80%",cols="1>,3<",frame="none",grid="none"]
|====
|latexmath:[$Pr(n,r) = n^r$], |_leia latexmath:[$Pr(n,r)$] como ``permutação (podendo ter repetições) de elementos tomados latexmath:[$r$] a latexmath:[$r$]''_
|====

A *prova* da fórmula é uma simples aplicação da regra do produto: o 1º elemento pode ser escolhido de latexmath:[$n$] modos; como repetições são possíveis, então cada um dos 2º, 3º , ... latexmath:[$r$]-ésimo elementos também podem ser escolhidos de latexmath:[$n$] modos; portanto, por tal regra, o número total de possibilidades é o produto de latexmath:[$n$] por si mesmo, latexmath:[$r$] vezes.

.{zwsp}
====
Um teclado de digitação tem 40 teclas, cada uma com somente um símbolo. De quantas maneiras diferentes um macaco doido e cego pode formar uma sequência de 10 símbolos?

{zwsp} +
*Solução:* latexmath:[$40^{10} = (4 \times 10)^{10} = 2^{20} \times 10^{10}4$], um número de 16 dígitos, na ordem de latexmath:[$10^{16} = 10 000 000 000 000 000 = 10$] quintilhões.
====

* *Permutação de Elementos Nem Todos Distintos* é uma sequência (portanto não somente importam o valor ou natureza dos elementos, mas, também, a ordem, as posições deles) de elementos tirados de um grupo de elementos possivelmente repetidos. O número de distintas permutações de latexmath:[$r$] elementos tirados de um grupo de latexmath:[$n$] elementos (havendo latexmath:[$n_a$] elementos latexmath:[$a$], latexmath:[$n_b$] elemento latexmath:[$b$], ..., e sendo latexmath:[$n_a + n_b + \cdots = n$]) é: +
[width="80%",cols=">,<",frame="none",grid="none"]
|====
|latexmath:[$P(n,(n_a,n_b,\ldots ))  =  \frac{n!}{(n_{a}! n_{b}! \cdots)}$] |_leia latexmath:[$P(n,(n_a,n_b,\ldots))$] como ``permutação de latexmath:[$n$] elementos havendo latexmath:[$n_a \; a$]’s, latexmath:[$n_b \; b$]’s, etc.''_
|===

//_

*Prova:* se pensássemos que os latexmath:[$n$] elementos são todos distintos um dos outros, teríamos latexmath:[$n!$] permutações; ao descobrirmos que latexmath:[$n_a$] dos elementos são idênticos entre si, devemos dividir isso por latexmath:[$n_{a}!$]; ao descobrirmos que latexmath:[$n_b$] dos elementos são idênticos entre si, devemos dividir isso por latexmath:[$n_{b}!$]; e assim por diante.

.(Morgado et al.):
====
Quantos são os anagramas da palavra ``MATEMÁTICA'' (com 10 letras)?

{zwsp} +
*Solução:* Como temos 3 letras A, 2 letras M, 2 letras T, 1 letra C, 1 letra I e 1 letra E (note que latexmath:[$3+2+2+1+1+1=10$]), a resposta é +
[latexmath]
++++
\[P(10,(3,2,2,1,1,1)) = \frac{10!}{(3!2!2!1!1!1!)} = 151200\]
++++
====

.(Morgado et al.):
====
Quantos são os anagramas de ``URUGUAI'' (com 7 letras) que começam por vogal?

{zwsp} +
*Solução:* Temos latexmath:[$P(6,(2,1,1,1,1))$] começados com U, latexmath:[$P(6,(3,1,1,1)))$] começados com A, e latexmath:[$P(6,(3,1,1,1))$] começados com I. A resposta é +
[latexmath]
++++
\[P(6,(2,1,1,1,1)) + 2 \times P(6,3,1,1,1))) = 360 + 2 \times 120 = 600 \]
++++
====

.{zwsp}
====
Quantos anagramas podemos formar a partir das letras da palavra ARARA (com 5 letras)?

{zwsp} +
*Solução:* O número de letras desta palavra é latexmath:[$n=5$]; nela, o número de letras latexmath:[$A$] é latexmath:[$n_A=3$], e o número de letras latexmath:[$R$] é latexmath:[$n_R=2$]. Pela fórmula, latexmath:[$P(n, (n_A,n_R)) = P(5, (3,2)) = 5! / (3! 2!) = 10$]
====

.{zwsp}
====
Quantos anagramas podemos obter a partir das letras da palavra PARAR (com 5 letras)?

{zwsp} +
*Solução:* latexmath:[$P(n, (n_P,n_A,n_R)) = P(5, (1,2,2)) = 5! / (2! 2!) = 30$]
====

.{zwsp}
====
Tenho 4 bolas amarelas, 3 bolas vermelhas, 2 bolas azuis e 1 bola verde. De quantas maneiras posso colocá-las serialmente em um tubo?

{zwsp} +
*Solução:* Neste caso de permutação com elementos repetidos temos um total de 10 bolas de quatro cores diferentes. Segundo a repetição das cores, devemos calcular latexmath:[$P(10,(4,3,2,1)) = 10! / (4!3!2!1!) = 12600$]
====

.{zwsp}
====
Entre os números distintos que são formados com todos os algarismos do número 333669 (com 6 dígitos), quantos desses são ímpares?

{zwsp} +
*Solução:*

Aqui, número ímpares terminarão somente em 3 ou 9.

No caso dos números terminados em 3 devemos calcular latexmath:[$P(5, (1,2,2))$] _(note que um dos 3 foi utilizado na última posição)_ latexmath:[$= 5! / (2!2!1!) = 30$]

No caso dos números terminados em 9 devemos calcular latexmath:[$P(5(3,2,1))$] _(note que o dígito 9 foi utilizado na última posição)_ latexmath:[$= 5! / (3!2!1!) = 10$]

Como temos 30 números terminados em 3 e mais 10 terminados em 9, então usamos a regra da soma e, no total, temos 40 números ímpares.
====

* *Permutação Caótica* (ou *Desordenada*) de latexmath:[$n$] elementos é uma permutação em que nenhum de seus elementos está na posição inicial. Usando a fórmula de inclusão-exclusão, demonstra-se que o número de permutações caóticas de (latexmath:[$1, 2, 3, \ldots , n$]) é dado por: +
[width="100%",cols="<",frame="none",grid="none"]
|====
|latexmath:[$K(n) = n! \cdot \left( \frac{1}{0!} - \frac{1}{1!} + \frac{1}{2!} - \frac{1}{3!} + \cdots + \frac{(-1)^n}{n!} \right)$] 
|_Importante: prova-se que latexmath:[$K(n)$] é o arredondamento (para o inteiro mais próximo, quer para baixo ou para cima) de latexmath:[$\frac{n!}{e}  =  \frac{n!}{2,718281828459045 \ldots}$])_

_(latexmath:[$K(n)$] também é escrito como latexmath:[$!n$], que é pronunciado como ``caos fatorial'' ou, em inglês ``derangements'' (desarrumações))_
|====

.(R. Garcia):
====
De quantas formas podemos permutar os algarismos do número 1234 de modo que nenhum número ocupe sua posição inicial?

{zwsp} +
*Solução:* latexmath:[$K(4) = 4!(1/0! - 1/1! + 1/2! - 1/3! + 1/4!) = 4!(1/1 - 1/1 + 1/2 - 1/6 + 1/24) = 4!(24 - 24 + 12 - 4 + 1)/24 = 24 \times 9/24 = 9$].Observe como a aproximação latexmath:[$n!/2,718281828459045$] resulta em latexmath:[$8,83$], que, arredondado para cima, dá latexmath:[$9$].
====

* *Arranjo Simples* é uma sequência (portanto não somente importam o valor ou natureza dos elementos, mas, também, a ordem, as posições deles) de latexmath:[$r$] elementos distintos tirados de um conjunto de latexmath:[$n$] elementos distintos. O número desses arranjos distintos é +
[width="100%",cols="1<,3<",frame="none",grid="none"]
|====
|latexmath:[$A(n,r) = \frac{n!}{(n-r)!}$] |_leia latexmath:[$A(n,r)$] como ``arranjo simples de latexmath:[$n$] elementos tomados latexmath:[$r$] a latexmath:[$r$]''_
|====

A *prova* é simples: há latexmath:[$n$] escolhas possíveis para o 1º elemento da sequência, latexmath:[$(n-1)$] escolhas para o 2º elemento, latexmath:[$(n-2)$] escolhas para o 3º elemento, ... latexmath:[$(n-r+1)$] escolhas para o latexmath:[$r$]-ésimo elemento. Usando a regra do produto, temos latexmath:[$A(n,r) = n(n-1)(n-2)(n-3) \cdots (n-r+1)$]. Mas isso é o mesmo quelatexmath:[$A(n,r) = n!/(n-r)!$] (verifique).

Se latexmath:[$r = n$] então arranjos tornam-se o mesmo que permutações, e temos: 

[latexmath]
++++
\[A(n,n) = n!\]
++++

Note que ``arranjo simples de latexmath:[$n$] elementos tomados latexmath:[$r$] a latexmath:[$r$]'' também é conhecido, particularmente nos USA, como ``permutação de latexmath:[$n$] elementos tomados latexmath:[$r$] a latexmath:[$r$]''. Não definimos ``arranjo podendo repetir elementos'' porque iria ser o mesmo que ``permutação podendo repetir elementos'', acima. E não definimos ``arranjo de elementos nem todos distintos'' porque iria ser o mesmo que ``permutação de elementos nem todos distintos'', acima.

.{zwsp}
====
7 pessoas estão apostando corrida. Quantos são os agrupamentos possíveis para os três primeiros colocados (diferenciando entre 1º, 2º e 3o lugares)?

{zwsp} +
*Solução:* latexmath:[$A(7,3) = 7!/(7-3)! = 7!/4! = 7 \times 6 \times 5 = 210$].
====

A *formação dos arranjos* pode ser feita assim: forme as combinações de latexmath:[$n$] elementos tomados latexmath:[$r$] a latexmath:[$r$]. Agora, tome cada combinação de latexmath:[$r$] elementos e ache todas suas permutações.

.{zwsp}
====
Dados os elementos latexmath:[$\{1,2,3,4\}$], suas latexmath:[$C(4,2) = n!/(r!(n-r)!) = 4!/(2!2!) = 6$] combinações 2 a 2 são: 12, 13, 14, 23, 24, 34. Portanto, os seus latexmath:[$n!/(n-r)! = 4!/2! = 12$] arranjos 2 a 2 são: 12, 21, 13, 31, 14, 41, 23, 32, 24, 42, 34, 43.
====

* *Arranjo Condicional:* Todos os latexmath:[$n$] elementos podem aparecer em cada arranjo de latexmath:[$r$] elementos, mas existe uma condição que deve ser satisfeita por latexmath:[$r_1$] de latexmath:[$n_1$] elementos. O número desses arranjos condicionais distintos é 

[latexmath]
++++
\[A(n,n_1,r,r_1) = A(n_1,r_1) \times A(n-n_1,r-r_1)\]
++++

O segundo fator, que não envolve condições, é fácil de calcular. Já o primeiro fator, envolvendo condições, não é calculado sempre por uma só e mesma fórmula, pode envolver raciocínios _adhoc_ (cada problema tendo solução com raciocínio diferente dos outros) e mais complexos. Pode ser preciso dividir o problema em subproblemas, resolver cada um desses, depois compor as subsoluções usando as regras de produto, de soma, e de inclusão-exclusão.

.{zwsp}
====
Quantos arranjos com latexmath:[$r = 4$] elementos do conjunto de latexmath:[$n = 7$] elementos latexmath:[$\{A,B,C,D,E,F,G\}$], começam com latexmath:[$r_1 = 2$] letras escolhidas no subconjunto latexmath:[$\{A,B,C\}$] de latexmath:[$n_1 = 3$] elementos?

{zwsp} +
*Solução:* latexmath:[$A(n,n_1,r,r_1) = A(7,3,4,2) = A(3,2) \times A(7-3,4-2) = A(3,2) \times A(4,2) = (3 \times 2)(4 \times 3)= 6 \times 12 = 72$]
====

.{zwsp}
====
De quantas maneiras podemos arranjar 8 das 10 letras A, B, C, D, E, F, G, H, I, J, sem repetições, de modo a formar uma string que comece por 2 vogais e termine com 2 consoantes?

{zwsp} +
*Solução:*

Há 3 vogais (A, E, I), portanto há latexmath:[$A(3,2) = 6$] maneiras de formar as 2 primeiras letras da string.

Há 7 consoantes (B, C, D, F, G, H, J), portanto há latexmath:[$A(7,2) = 42$] maneiras de formar as 2 últimas letras da string.

Gastas essas 4 letras, sobram latexmath:[$10-4 = 6$] letras para serem tomadas latexmath:[$8-4=4$] delas e arranjadas formando o ``miolo'' da string de latexmath:[$A(6,4) = 360$] maneiras.

Pela regra do  produto, a resposta é latexmath:[$6 \times 42 \times 360 = 90720$] maneiras de formar a string.
====

.{zwsp}
====
Quantos arranjos há das latexmath:[$n=26$] letras do alfabeto tomadas em arranjos de comprimento latexmath:[$r=10$], onde latexmath:[$n_1=5$] das letras do alfabeto são vogais e são tomadas (sem repetições) para as latexmath:[$r_1=2$] posições especiais (a primeira e a última letra do arranjo), e  cada uma das outras latexmath:[$r-r_1 = 10-2 = 8$] posições pode ser qualquer letra (sem repetição) das latexmath:[$n-n_1 = 26-5 = 21$] letras restantes (as consoantes).

{zwsp} +
*Solução:* latexmath:[$A(n,n_1,r,r_1) = A(26,5,10,2) = A(n_1,r_1) \times A(n-n_1,r-r_1) = A(5,2) \times A(26-5,10-2) = A(5,2) \times A(21,8) = (5!/(5-2)!) \times (21!/(21-8)!) = (5!/3!) \times (21!/13!) = 5 \times 4 \times 21 \times 20 \times 19 \times 18 \times 17 \times 16 \times 15 \times 14 = 164 094 336 000$].
====

.{zwsp}
====
Considere a palavra AMEBA. Qual o número de maneiras em que as 5 letras desta palavra podem ser organizadas com as 2 letras A colocadas separadas uma da outra?

{zwsp} +
*Solução:* 

Omitindo as 2 letras A, as demais letras (M,E,B) podem ser dispostas de latexmath:[$3!$] maneiras. Em cada uma dessas maneiras (por exemplo BEM) o primeiro A pode ser inserido em qualquer uma das 4 posições possíveis (por exemplo, em um dos asteriscos em *B*E*M*, resultando, por exemplo, em *B*EAM*); depois, o segundo A pode ser inserido de 3 maneiras. Usando a regra do produto, o número de arranjos possíveis parece ser latexmath:[$3! \times 4 \times 3$]. Mas não queremos diferenciar entre as 2 letras A, portanto, o número de arranjos possíveis é latexmath:[$3! \times 4 \times 3/2 = 36$].
====

.{zwsp}
====
Considere a palavra AMEBA. Qual o número de maneiras em que as 5 letras desta palavra podem ser organizadas com as 2 letras A colocadas vizinhas uma da outra?

{zwsp} +
*Solução:* Podemos tomar as 2 letras A vizinhas como se fossem uma só letra, como em (AA)MEB, que teria 4 letras. Portanto, o número de permutações dessas 4 letras é latexmath:[$4! = 24$].
====

.{zwsp}
====
Considere a palavra ECELEMOLO. Qual o número de maneiras em que as 9 letras desta palavra podem ser organizadas com as 3 letras E colocadas vizinhas?

{zwsp} +
*Solução:*

* Tomando as 3 letras ``E'' como sendo um só objeto, as 6 letras de CLMOLO (note que há 2 letras ``L'' e 2 letras ``O'', portanto temos uma permutação de elementos nem todos distintos) podem ser arranjadas de latexmath:[$P(n,(n_L,n_O,\ldots)) = 6!/(2!2!) = 180$] maneiras.
* Agora consideremos qualquer dessas permutações, por exemplo CLMOLO. Há 7 locais onde ``EEE'' pode ser aí inserida. Se assinalarmos esses 7 locais com ``*'', teremos o seguinte esquema: *C*L*M*O*L*O*. Claramente, há 7 maneiras de ``EEE'' ocupar o espaço de algum dos asteriscos.
* Pela regra do produto, a resposta é latexmath:[$180 \times 7 = 1260$] maneiras em que as 9 letras da palavra ECELEMOLO podem ser organizadas com as 3 letras ``E'' colocadas vizinhas.
====

.{zwsp}
====
Considere a palavra ECELEMOLO. Qual o número de maneiras em que as 9 letras desta palavra podem ser organizadas com as 3 letras E colocadas separadas cada uma das outras?

{zwsp} +
*Solução:*

* Deixando de fora as 3 letras ``E'', as 6 letras de CLMOLO (note que há 2 letras ``L'' e 2 letras ``O'', portanto temos uma permutação de elementos nem todos distintos) podem ser arranjadas de latexmath:[$P(n,(n_L,n_O,\ldots)) = 6!/(2!2!) = 180$] maneiras.
* Agora, consideremos qualquer dessas permutações, por exemplo CLMOLO. Há 7 locais onde uma (somente uma) letra ``E'' pode ser aí inserida. Se assinalarmos esses 7 locais com ``*'', teremos o seguinte esquema: *C*L*M*O*L*O*. +
Em qualquer dessas maneiras, o primeiro ``E'' pode ser inserido em qualquer um de 7 pontos assinalados com asterisco no esquema *C*L*M*O*L*O* . O segundo ``E'' pode ser inserido de 6 modos (num outro ponto assinalado com \*) e o terceiro ``E'' pode ser inserido de 5 modos (idem). Multiplicando, temos latexmath:[$7 \times 6 \times 5 = 210$] arranjos para as 3 letras ``E''. Mas isso está diferenciando entre as 3 letras ``E'', o que não é desejado, portando só há latexmath:[$210/3! = 35$] maneiras de dispor as 3 letras ``E'' sem diferenciar entre elas.
* _Outro modo de calcular isso:_ Consideremos qualquer dessas permutações, por exemplo CLMOLO. Numeremos com latexmath:[$1,2,3, \ldots , 7$] os espaços antes/entre/após cada uma dessas 7 letras, assim: 1C2L3M4O5L6O7. Como os 3 ``E'' não têm distinção entre si, então temos que achar o número de combinações (pois ordem não importa) dos 7 elementos latexmath:[$\{1, 2, 3, 4, 5, 6, 7\}$] tomados 3 a 3, para ai colocar os ``E''. Portanto, há latexmath:[$C(7,3) = 35$] maneiras de dispor as 3 letras ``E'' sem diferenciar entre elas. 
* Pela regra do produto, a resposta é latexmath:[$180 \times 35 = 6300$] maneiras em que as 9 letras da palavra ECELEMOLO podem ser organizadas com as 3 letras ``E'' colocadas não vizinhas nenhuma delas de nenhuma das outras.
====

.{zwsp}
====
Quantos números maiores do que 200 podem ser formado utilizando os dígitos 1,2,3,4,5, se nenhum dígito pode ser repetido?

{zwsp} +
*Solução:*

* Com comprimento 3, o 1º dígito pode ser escolhido de 4 modos (proibido o 1), o 2º de 4 modos (proibido o dígito à esquerda), o 3º de 3 modos (proibidos os dígitos à esquerda), e a regra do produto nos dá o total de latexmath:[$4 \times 4 \times 3 = 48$] modos.
* Com comprimento de 4 dígitos temos latexmath:[$A(5,4) = 5 \times 4 \times 3 \times 2 = 120$] modos.
* Com comprimento de 5 dígitos temos latexmath:[$A(5,5) = P(5) = 5! = 120$] modos.

Usando a regra da soma, temos latexmath:[$48+120+120 = 288$] modos.
====

.{zwsp}
====
Usando os 5 algarismos 2, 3, 4, 5 e 6, e proibindo repetições:

[width="100%",cols="<,<",frame="none",grid="none"]
|====
|a) Quantos números de 4 e 5 dígitos podem ser formados? |b) Quantos números serão maiores do que 300?
||
|c) Quantos números com 3 ou mais dígitos serão pares? |
|====

{zwsp} +
*Solução:* 

a) Para formarmos números de comprimento 4, sem repetições, temos latexmath:[$A(5,4) = 5 \times 4 \times 3 \times 2 = 120$] modos; +
 Para formarmos números de comprimento 5, sem repetições, temos latexmath:[$A(5,5) = P(5) = 5! = 120$] modos;

Pela regra da soma, temos latexmath:[$120+120 = 240$] modos.

{zwsp} +
b) Com comprimento 3, o 1º algarismo tem 4 opções (3, 4, 5 e 6), e os outros 2 dígitos podem ser quaisquer outros, sem repetição, portanto temos latexmath:[$4 \times A(4,2) =  4 \times 4 \times 3 = 48$] modos; +
Com comprimento 4, temos latexmath:[$A(5,4) = 5 \times 4 \times 3 \times 2 = 120$] modos; +
Com comprimento 5, temos latexmath:[$A(5,5) = P(5) = 5! = 120$] modos.

Usando a regra da soma, temos latexmath:[$48+120+120 = 288$] modos.

{zwsp} +
c) Para formarmos números de comprimento 3, o último dígito tem 3 opções (2, 4 e 6), e os 2 dígitos anteriores têm latexmath:[$A(4,2) = 4 \times 3 = 12$] opções, e a regra do produto nos dá o total de latexmath:[$3 \times 12 = 36$] opções; +
Para formarmos números de comprimento 4, o último dígito tem 3 opções (2, 4 e 6), e os 3 dígitos anteriores têm latexmath:[$A(4,3) = 4 \times 3 \times 2 = 24$] opções, e a regra do produto nos dá o total de latexmath:[$3 \times 24 = 72$] opções; +
Para formarmos números de comprimento 5, o último dígito tem 3 opções (2, 4 e 6), e os 4 dígitos anteriores têm latexmath:[$A(4,4) = P(4) = 4! = 24$] opções, e a regra do produto nos dá o total de latexmath:[$3 \times 24 = 72$] opções;

A regra da soma nos dá o total de latexmath:[$36+72+72 = 180$] opções.
====

* *Combinação Simples* (ou *Sem Repetição*) é um subconjunto com latexmath:[$r$] elementos em um conjunto latexmath:[$U$] que tem latexmath:[$n$] elementos. Como é um conjunto, não há repetição de elementos em uma combinação, e a ordem e posição não importam. O número dessas combinações distintas é +
[width="80%",cols="1<,3<",frame="none",grid="none"]
|====
|latexmath:[$C(n,r) = \frac{n!}{(r!(n-r)!)}$] 
|_leia ``latexmath:[$C(n,r)$]'' como ``combinação simples de latexmath:[$n$] elementos tomados latexmath:[$r$] a latexmath:[$r$]''._

_Note que latexmath:[$C(n,r) = C(n,n-r)$]_
|====

*Prova:* O número de arranjos (a ordem dos elementos importa) simples é latexmath:[$A(n,r)$]. +
O número de maneiras de fazer permutações sobre um único desses arranjos é latexmath:[$P(r)$]. +
Como a ordem é desprezada nas combinações, então latexmath:[$C(n,r)$] é o número de arranjos, latexmath:[$A(n,r)$], dividido pelo número (latexmath:[$P(r)$]) de modos de ordenar cada arranjo individual: latexmath:[$C(n,r) = A(n,r)/P(r) = (n!/(n-r)!) / r! = n!/(r!(n-r)!)$].

.(Morgado et AL.):
====
De quantos modos podemos escolher 6 pessoas, incluindo pelo menos 2 mulheres, a partir de um grupo de 7 homens e 4 mulheres?

{zwsp} +
*Solução:*

As alternativas são: +
4 homens, 2 mulheres +
3 homens, 3 mulheres +
2 homens, 4 mulheres

Portanto, a resposta é +
latexmath:[$C(7,4) \times C(4,2) + C(7,3) \times C(4,3) + C(7,2) \times C(4,4) = 7!/(4!3!) \times 4!/(2!2!) + 7!/(3!4!) \times 4!/(3!1!) + 7!/(2!5!) \times 4!/(4!0!) = 35 \times 6 + 35 \times 4 + 21 \times 1 = 371$]
====

.{zwsp}
====
De quantas maneiras 2 bolas podem ser selecionados entre 16 bolas?

{zwsp} +
*Solução:* latexmath:[$C(n,r) = n!/(r!(n-r)!) = 16!/(2!(16-2)!) = 16!/(2!14!) = 16 \times 15/2 = 120$] maneiras
====

.{zwsp}
====
Uma comissão composta por 3 homens e 5 mulheres deve ser selecionada a partir de 5 homens e 10 mulheres. De quantos modos isso pode ser feito? 

{zwsp} +
*Solução:*

* Número de maneiras de selecionar 3 entre 5 homens: +
latexmath:[$C(5,3) = C(n,r) = n!/(r!(n-r)!) = 5!/(3!(5-3)!) = 5 \times 4/2 = 10$] maneiras; 
* Número de maneiras de selecionar 5 entre 10 mulheres: +
latexmath:[$C(10,5) = C(n,r) = n!/(r!(n-r)!) = 10!/(5!(10-5)!) = 10 \times 9 \times 8 \times 7 \times 6/(5 \times 4 \times 3 \times 2 \times 1) = 9 \times 8 \times 7 \times 6/(4 \times 3) = 3 \times 2 \times 7 \times 6 = 252$] maneiras;

Pela regra do produto, o número de maneiras de formar a comissão latexmath:[$= 252 \times 10 = 2520$] maneiras.
====
